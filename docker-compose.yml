# SNP Printer Service - Docker Compose
# For local development or Unraid deployment

version: '3.8'

services:
  snp-printer:
    build: .
    container_name: snp-printer-service
    restart: unless-stopped
    ports:
      - "5000:5000"
    environment:
      # Printer Configuration
      - PRINTER_TYPE=network
      - NETWORK_HOST=${NETWORK_HOST:-192.168.1.100}
      - NETWORK_PORT=${NETWORK_PORT:-9100}
      # Multiple printers (comma-separated)
      # - PRINTER_HOSTS=192.168.1.100,192.168.1.101

      # Server Configuration
      - HOST=0.0.0.0
      - PORT=5000
      - DEBUG=${DEBUG:-false}
    # Use host network mode for easier printer discovery
    # Uncomment below and comment out 'ports' if needed
    # network_mode: host
    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:5000/health')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
