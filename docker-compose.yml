# SNP Printer Service - Docker Compose
# For Unraid deployment

version: '3.8'

services:
  snp-printer:
    build: .
    container_name: snp-printer-service
    restart: unless-stopped
    ports:
      - "5000:5000"
    environment:
      # Printer Configuration
      - PRINTER_TYPE=network
      - NETWORK_HOST=${NETWORK_HOST:-192.168.50.103}
      - NETWORK_PORT=${NETWORK_PORT:-9100}

      # Optional: Second printer
      # - PRINTER_2_HOST=192.168.50.104
      # - PRINTER_2_PORT=9100

      # Server Configuration
      - HOST=0.0.0.0
      - PORT=5000
      - DEBUG=${DEBUG:-false}

      # Security (set REQUIRE_AUTH=true for production)
      - REQUIRE_AUTH=${REQUIRE_AUTH:-false}
      - API_KEY_SNP_SITE=${API_KEY_SNP_SITE:-dev-key-snp-site}
      - API_KEY_ADMIN=${API_KEY_ADMIN:-dev-key-admin}

    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:5000/health')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
